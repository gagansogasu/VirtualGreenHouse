"use strict";(self.webpackChunkvirtual_greenhouse_frontend=self.webpackChunkvirtual_greenhouse_frontend||[]).push([[460],{460:(e,s,a)=>{a.r(s),a.d(s,{default:()=>t});var r=a(43),o=a(216),i=a(475),l=a(579);const t=()=>{const[e,s]=(0,r.useState)("user"),[a,t]=(0,r.useState)({email:"",password:""}),[n,d]=(0,r.useState)({}),[c,m]=(0,r.useState)(!1),h=(0,o.Zp)(),p=e=>{s(e),d({})},u=e=>{const{name:s,value:a}=e.target;t((e=>({...e,[s]:a}))),n[s]&&d((e=>({...e,[s]:""})))},g=async s=>{if(s.preventDefault(),(()=>{const e={};return a.email?/\S+@\S+\.\S+/.test(a.email)||(e.email="Please enter a valid email address"):e.email="Email is required",a.password||(e.password="Password is required"),d(e),0===Object.keys(e).length})()){m(!0),d({});try{const s="user"===e?"/api/users/login":"/api/shops/login",r=await fetch(`http://localhost:5000${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,password:a.password})}),o=await r.json();if(!r.ok)throw new Error(o.message||"Login failed");localStorage.setItem("token",o.token),localStorage.setItem("user",JSON.stringify(o.user||o.shop)),localStorage.setItem("userType",e),h("user"===e?"/user-dashboard":"/shop-dashboard")}catch(r){d({submit:r.message||"Login failed. Please try again."})}finally{m(!1)}}};return(0,l.jsxs)("div",{className:"container",children:[(0,l.jsxs)("div",{className:"login-card",children:[(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsx)("div",{className:"logo",children:"\ud83c\udf3f Virtual Greenhouse"}),(0,l.jsxs)("div",{className:"tabs",children:[(0,l.jsx)("button",{className:"tab "+("user"===e?"active":""),onClick:()=>p("user"),children:"User"}),(0,l.jsx)("button",{className:"tab "+("shop"===e?"active":""),onClick:()=>p("shop"),children:"Shop"})]}),n.submit&&(0,l.jsx)("div",{className:"error-message",children:n.submit}),(0,l.jsxs)("form",{id:"userForm",className:"login-form "+("user"===e?"active":""),onSubmit:g,children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"email",children:"Email"}),(0,l.jsx)("input",{type:"email",id:"email",name:"email",value:a.email,onChange:u,placeholder:"Enter your email",className:n.email?"error":"",required:!0}),n.email&&(0,l.jsx)("span",{className:"error-text",children:n.email})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"password",children:"Password"}),(0,l.jsx)("input",{type:"password",id:"password",name:"password",value:a.password,onChange:u,placeholder:"Enter your password",className:n.password?"error":"",required:!0}),n.password&&(0,l.jsx)("span",{className:"error-text",children:n.password})]}),(0,l.jsxs)("div",{className:"options",children:[(0,l.jsxs)("label",{className:"remember",children:[(0,l.jsx)("input",{type:"checkbox"})," Remember me"]}),(0,l.jsx)("div",{className:"forgot-password-link",children:(0,l.jsx)(i.N_,{to:"/forgot-password",children:"Forgot Password?"})})]}),(0,l.jsx)("button",{type:"submit",className:"login-btn",disabled:c,children:c?"Logging in...":"Login as User"})]}),(0,l.jsxs)("form",{id:"shopForm",className:"login-form "+("shop"===e?"active":""),onSubmit:g,children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"shop-email",children:"Shop Email"}),(0,l.jsx)("input",{type:"email",id:"shop-email",name:"email",value:a.email,onChange:u,placeholder:"Enter your shop email",className:n.email?"error":"",required:!0}),n.email&&(0,l.jsx)("span",{className:"error-text",children:n.email})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"shop-password",children:"Password"}),(0,l.jsx)("input",{type:"password",id:"shop-password",name:"password",value:a.password,onChange:u,placeholder:"Enter your password",className:n.password?"error":"",required:!0}),n.password&&(0,l.jsx)("span",{className:"error-text",children:n.password})]}),(0,l.jsxs)("div",{className:"options",children:[(0,l.jsxs)("label",{className:"remember",children:[(0,l.jsx)("input",{type:"checkbox"})," Remember me"]}),(0,l.jsx)("div",{className:"forgot-password-link",children:(0,l.jsx)(i.N_,{to:"/forgot-password",children:"Forgot Password?"})})]}),(0,l.jsx)("button",{type:"submit",className:"login-btn",disabled:c,children:c?"Logging in...":"Login as Shop"})]}),(0,l.jsxs)("div",{className:"register",children:["Don't have an account? ",(0,l.jsx)(i.N_,{to:"/register/user",children:"Register here"})]})]}),(0,l.jsx)("div",{className:"image-section",children:(0,l.jsx)("img",{src:"/assets/login.jpg",alt:"Greenhouse"})})]}),(0,l.jsxs)("div",{className:"footer",children:[(0,l.jsx)("a",{href:"/terms",children:"Terms of Service"})," \u2022 ",(0,l.jsx)("a",{href:"/privacy",children:"Privacy Policy"})]})]})}}}]);
//# sourceMappingURL=460.b8c72435.chunk.js.map