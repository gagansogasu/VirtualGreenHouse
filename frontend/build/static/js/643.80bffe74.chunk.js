"use strict";(self.webpackChunkvirtual_greenhouse_frontend=self.webpackChunkvirtual_greenhouse_frontend||[]).push([[643],{599:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var r=a(43),t=a(216),l=a(475),i=a(640),n=a(488),c=a(204),o=(a(342),a(621)),d=a(579);const h=()=>{const{cart:e,removeFromCart:s,updateQuantity:a,cartTotal:h,cartCount:m,clearCart:p}=(0,i._$)(),[u,x]=r.useState(""),[j,v]=r.useState(!1),N=(0,t.Zp)(),g=e.reduce(((e,s)=>(e[s.shopId]||(e[s.shopId]={shopName:s.shopName,items:[],subtotal:0}),e[s.shopId].items.push(s),e[s.shopId].subtotal+=s.price*s.quantity,e)),{}),y=e=>e>500?0:50;return 0===m?(0,d.jsx)("div",{className:"empty-cart",children:(0,d.jsxs)("div",{className:"empty-cart-content",children:[(0,d.jsx)(c.IoZ,{className:"empty-cart-icon"}),(0,d.jsx)("h2",{children:"Your cart is empty"}),(0,d.jsx)("p",{children:"Looks like you haven't added any plants to your cart yet."}),(0,d.jsxs)(l.N_,{to:"/shops",className:"btn btn-primary",children:[(0,d.jsx)(c.QVr,{className:"mr-2"})," Continue Shopping"]})]})}):(0,d.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,d.jsx)("div",{className:"cart-hero",children:(0,d.jsxs)("div",{className:"cart-hero-content",children:[(0,d.jsx)(c.IoZ,{className:"cart-hero-icon"}),(0,d.jsxs)("h1",{children:["Your Cart ",(0,d.jsxs)("span",{className:"cart-count",children:["(",m," ",1===m?"Item":"Items",")"]})]}),(0,d.jsx)("p",{className:"cart-hero-sub",children:"All your green picks in one place!"}),(0,d.jsxs)(l.N_,{to:"/shops",className:"btn btn-outline cart-hero-btn",children:[(0,d.jsx)(c.QVr,{})," Continue Shopping"]})]})}),h<500&&(0,d.jsxs)("div",{className:"cart-offer",children:[(0,d.jsx)("span",{children:"\ud83c\udf31 Free Delivery on orders above \u20b9500!"}),(0,d.jsx)("div",{className:"cart-offer-progress",children:(0,d.jsx)("div",{className:"cart-offer-bar",style:{width:`${Math.min(h/500*100,100)}%`}})}),(0,d.jsxs)("span",{className:"cart-offer-amount",children:["\u20b9",(500-h).toLocaleString()," away from free delivery"]})]}),(0,d.jsxs)("div",{className:"cart-content",children:[(0,d.jsx)("div",{className:"cart-items",children:Object.entries(g).map((e=>{let[r,t]=e;return(0,d.jsxs)("div",{className:"cart-shop-card",children:[(0,d.jsxs)("div",{className:"cart-shop-header",children:[(0,d.jsx)(c.Tvt,{className:"cart-shop-icon"}),(0,d.jsx)("h2",{children:t.shopName})]}),t.items.map((e=>(0,d.jsxs)("div",{className:"cart-item",children:[(0,d.jsx)("div",{className:"item-image",children:(0,d.jsx)("img",{src:e.image||"/placeholder-plant.jpg",alt:e.name})}),(0,d.jsxs)("div",{className:"item-details",children:[(0,d.jsx)("h3",{children:e.name}),(0,d.jsx)("div",{className:"item-category",children:e.category||"Indoor Plant"}),(0,d.jsxs)("div",{className:"item-price",children:["\u20b9",e.price.toLocaleString()]}),(0,d.jsxs)("div",{className:"item-quantity",children:[(0,d.jsx)("button",{className:"quantity-btn",onClick:()=>a(e.id,e.quantity-1),disabled:e.quantity<=1,children:(0,d.jsx)(c.iu5,{})}),(0,d.jsx)("span",{className:"quantity-value",children:e.quantity}),(0,d.jsx)("button",{className:"quantity-btn",onClick:()=>a(e.id,e.quantity+1),children:(0,d.jsx)(c.OiG,{})}),e.quantity<=3&&(0,d.jsx)("span",{className:"low-stock-badge",children:"Low Stock"}),(0,d.jsxs)("button",{className:"btn danger remove-btn",onClick:()=>s(e.id),children:[(0,d.jsx)(c.qbC,{})," Remove"]})]})]}),(0,d.jsxs)("div",{className:"item-total",children:["\u20b9",(e.price*e.quantity).toLocaleString()]})]},e._id||e.id))),(0,d.jsxs)("div",{className:"cart-shop-summary",children:[(0,d.jsxs)("div",{children:["Subtotal (",t.items.length," items): ",(0,d.jsxs)("b",{children:["\u20b9",t.subtotal.toLocaleString()]})]}),(0,d.jsxs)("div",{children:["Delivery: ",0===y(t.subtotal)?(0,d.jsx)("span",{className:"free-delivery",children:"Free"}):`\u20b9${y(t.subtotal).toLocaleString()}`]}),(0,d.jsxs)("div",{children:["Total: ",(0,d.jsxs)("span",{className:"shop-total",children:["\u20b9",(l=t.subtotal,l+y(l)).toLocaleString()]})]})]})]},r);var l}))}),(0,d.jsxs)("div",{className:"cart-summary",children:[(0,d.jsx)("h2",{children:"Order Summary"}),(0,d.jsxs)("div",{className:"shipping-address",children:[(0,d.jsxs)("h3",{children:[(0,d.jsx)(c.vq8,{})," Delivery Address"]}),(0,d.jsx)("textarea",{value:u,onChange:e=>x(e.target.value),placeholder:"Enter your full shipping address",rows:"3",required:!0})]}),(0,d.jsxs)("div",{className:"summary-row",children:[(0,d.jsx)("span",{children:"Subtotal"}),(0,d.jsxs)("span",{children:["\u20b9",h.toLocaleString()]})]}),(0,d.jsxs)("div",{className:"summary-row",children:[(0,d.jsx)("span",{children:"Delivery"}),(0,d.jsx)("span",{children:h>500?"Free":"\u20b950"})]}),(0,d.jsxs)("div",{className:"summary-row total",children:[(0,d.jsx)("span",{children:"Total"}),(0,d.jsxs)("span",{children:["\u20b9",h>500?h.toLocaleString():(h+50).toLocaleString()]})]}),(0,d.jsx)("button",{onClick:async()=>{if(u.trim()){v(!0);try{const e={shippingAddress:u,paymentMethod:"Cash on Delivery"};await o.rX.createOrder(e),n.oR.success("Order placed successfully!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),p(),x(""),setTimeout((()=>{N("/orders")}),2e3)}catch(r){var s,a;console.error("Error placing order:",r),n.oR.error((null===(s=r.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to place order online. Saving locally.");const t={items:e,shippingAddress:u,total:h,orderDate:(new Date).toISOString(),status:"pending",orderId:`ORD-${Date.now()}`},l=JSON.parse(localStorage.getItem("orders")||"[]");l.push(t),localStorage.setItem("orders",JSON.stringify(l)),p(),x(""),setTimeout((()=>{N("/orders")}),2e3)}finally{v(!1)}}else n.oR.error("Please enter a shipping address")},disabled:j||!u.trim(),className:"btn place-order-btn",children:j?(0,d.jsx)("span",{className:"loading",children:"Processing..."}):"Place Order"}),(0,d.jsxs)("p",{className:"secure-checkout",children:[(0,d.jsx)(c.A7C,{})," Secure Checkout"]})]})]}),(0,d.jsxs)("footer",{className:"cart-footer",children:[(0,d.jsxs)("div",{children:["\xa9 ",(new Date).getFullYear()," VirtualGreen. All rights reserved."]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("a",{href:"https://instagram.com",className:"social-link",target:"_blank",rel:"noopener noreferrer",children:"Instagram"})," |",(0,d.jsx)("a",{href:"https://facebook.com",className:"social-link",target:"_blank",rel:"noopener noreferrer",children:"Facebook"})]})]})]})}}}]);
//# sourceMappingURL=643.80bffe74.chunk.js.map