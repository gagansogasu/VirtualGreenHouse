"use strict";(self.webpackChunkvirtual_greenhouse_frontend=self.webpackChunkvirtual_greenhouse_frontend||[]).push([[497],{497:(e,s,r)=>{r.r(s),r.d(s,{default:()=>n});var a=r(43),o=r(216),i=r(475),t=r(579);const n=()=>{const[e,s]=(0,a.useState)({shopName:"",email:"",password:"",confirmPassword:"",phone:"",address:"",description:"",terms:!1}),[r,n]=(0,a.useState)({}),[d,c]=(0,a.useState)(!1),[l,m]=(0,a.useState)(""),p=(0,o.Zp)(),h=e=>{const{name:a,value:o,type:i,checked:t}=e.target;s((e=>({...e,[a]:"checkbox"===i?t:o}))),r[a]&&n((e=>({...e,[a]:""})))};return(0,t.jsx)("div",{className:"register-container",children:(0,t.jsxs)("div",{className:"register-card",children:[(0,t.jsx)("div",{className:"center-section",children:(0,t.jsx)("img",{src:"/assets/shop_register.png",alt:"Shop Registration",className:"register-image"})}),(0,t.jsxs)("div",{className:"right-section",children:[(0,t.jsxs)("div",{className:"register-header",children:[(0,t.jsx)("h1",{children:"Create your Shop Account"}),(0,t.jsx)("p",{children:"Join Virtual Greenhouse as a shop owner"})]}),(0,t.jsxs)("div",{className:"tabs",children:[(0,t.jsx)(i.N_,{to:"/register/user",className:"tab",children:"Register as User"}),(0,t.jsx)("button",{className:"tab active",children:"Register as Shop"})]}),l&&(0,t.jsx)("div",{className:"success-message",children:l}),r.submit&&(0,t.jsx)("div",{className:"error-message",children:r.submit}),(0,t.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),(()=>{const s={};return e.shopName.trim()||(s.shopName="Shop name is required"),e.email.trim()?/\S+@\S+\.\S+/.test(e.email)||(s.email="Email is invalid"):s.email="Email is required",e.phone.trim()?/^\d{10,}$/.test(e.phone)||(s.phone="Phone number must be at least 10 digits"):s.phone="Phone number is required",e.address.trim()||(s.address="Address is required"),e.description.trim()||(s.description="Description is required"),e.password?e.password.length<8&&(s.password="Password must be at least 8 characters"):s.password="Password is required",e.password!==e.confirmPassword&&(s.confirmPassword="Passwords do not match"),e.terms||(s.terms="You must accept the terms and conditions"),n(s),0===Object.keys(s).length})()){c(!0),n({});try{const s={shopName:e.shopName,email:e.email,password:e.password,phone:e.phone,address:e.address,description:e.description},r=await fetch("http://localhost:5000/api/shops/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),a=await r.json();if(!r.ok){if(a.fields)n(a.fields);else{if(!a.errors)throw new Error(a.message||"Registration failed");n({submit:a.errors.join(", ")})}return}localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.shop)),localStorage.setItem("userType","shop"),m("Registration successful! Redirecting to dashboard..."),setTimeout((()=>{p("/shop-dashboard")}),1500)}catch(r){console.error("Registration error:",r),n({submit:r.message||"Registration failed. Please try again."})}finally{c(!1)}}},children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("input",{type:"text",name:"shopName",placeholder:"Enter shop name",value:e.shopName,onChange:h,className:r.shopName?"error":"",required:!0}),r.shopName&&(0,t.jsx)("span",{className:"error-message",children:r.shopName})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("input",{type:"email",name:"email",placeholder:"Enter email address",value:e.email,onChange:h,className:r.email?"error":"",required:!0}),r.email&&(0,t.jsx)("span",{className:"error-message",children:r.email})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("input",{type:"password",name:"password",placeholder:"Enter password",value:e.password,onChange:h,className:r.password?"error":"",required:!0}),r.password&&(0,t.jsx)("span",{className:"error-message",children:r.password})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("input",{type:"password",name:"confirmPassword",placeholder:"Confirm password",value:e.confirmPassword,onChange:h,className:r.confirmPassword?"error":"",required:!0}),r.confirmPassword&&(0,t.jsx)("span",{className:"error-message",children:r.confirmPassword})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("input",{type:"tel",name:"phone",placeholder:"Enter contact number",value:e.phone,onChange:h,className:r.phone?"error":"",required:!0}),r.phone&&(0,t.jsx)("span",{className:"error-message",children:r.phone})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("input",{type:"text",name:"address",placeholder:"Enter shop address",value:e.address,onChange:h,className:r.address?"error":"",required:!0}),r.address&&(0,t.jsx)("span",{className:"error-message",children:r.address})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("textarea",{name:"description",placeholder:"Enter shop description",value:e.description,onChange:h,className:r.description?"error":"",required:!0}),r.description&&(0,t.jsx)("span",{className:"error-message",children:r.description})]}),(0,t.jsxs)("div",{className:"form-group terms",children:[(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",name:"terms",checked:e.terms,onChange:h,className:r.terms?"error":""}),"I agree to the Terms and Conditions"]}),r.terms&&(0,t.jsx)("span",{className:"error-message",children:r.terms})]}),(0,t.jsx)("button",{type:"submit",className:"register-btn",disabled:d,children:d?"Registering...":"Create Shop Account"})]}),(0,t.jsxs)("p",{className:"login-link",children:["Already have an account? ",(0,t.jsx)(i.N_,{to:"/login",children:"Login here"})]})]})]})})}}}]);
//# sourceMappingURL=497.09c0000b.chunk.js.map