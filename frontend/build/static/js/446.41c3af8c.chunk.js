"use strict";(self.webpackChunkvirtual_greenhouse_frontend=self.webpackChunkvirtual_greenhouse_frontend||[]).push([[446],{446:(e,s,r)=>{r.r(s),r.d(s,{default:()=>l});var a=r(43),n=r(216),i=r(475),t=r(621),d=r(579);const l=()=>{const[e,s]=(0,a.useState)([]),[r,l]=(0,a.useState)(!0),[c,o]=(0,a.useState)(null),h=(0,n.Zp)();(0,a.useEffect)((()=>{(async()=>{try{if(!localStorage.getItem("token"))return void h("/login");l(!0);const e=await t.rX.getOrders();s(e.data),o(null)}catch(e){console.error("Error fetching orders:",e),o("Failed to load your orders. Please try again.")}finally{l(!1)}})()}),[h]);const u=e=>{switch(e){case"Pending":return"#f57c00";case"Processing":return"#2196f3";case"Shipped":return"#9c27b0";case"Delivered":return"#4caf50";case"Cancelled":return"#f44336";default:return"#757575"}};return(0,d.jsxs)("div",{className:"orders-page",children:[(0,d.jsxs)("header",{className:"orders-header",children:[(0,d.jsx)("div",{className:"logo",children:"VirtualGreen"}),(0,d.jsxs)("nav",{className:"orders-nav",children:[(0,d.jsx)(i.N_,{to:"/user-dashboard",children:"Home"}),(0,d.jsx)(i.N_,{to:"/shops",children:"Shops"}),(0,d.jsx)(i.N_,{to:"/cart",children:"Cart"}),(0,d.jsx)(i.N_,{to:"/profile",children:"Profile"})]})]}),(0,d.jsxs)("div",{className:"orders-container",children:[(0,d.jsx)("h1",{children:"My Orders"}),r&&(0,d.jsx)("div",{className:"loading",children:"Loading orders..."}),c&&(0,d.jsx)("div",{className:"error-message",children:c}),!r&&!c&&0===e.length&&(0,d.jsxs)("div",{className:"empty-orders",children:[(0,d.jsx)("div",{className:"empty-orders-icon",children:"ud83dudce6"}),(0,d.jsx)("h2",{children:"No Orders Found"}),(0,d.jsx)("p",{children:"You haven't placed any orders yet."}),(0,d.jsx)(i.N_,{to:"/shops",className:"shop-now-btn",children:"Shop Now"})]}),!r&&!c&&e.length>0&&(0,d.jsx)("div",{className:"orders-list",children:e.map((e=>{return(0,d.jsxs)("div",{className:"order-card",children:[(0,d.jsxs)("div",{className:"order-header",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{children:["Order #",e._id.substring(e._id.length-8)]}),(0,d.jsxs)("p",{className:"order-date",children:["Placed on ",(r=e.orderDate,new Date(r).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}))]})]}),(0,d.jsx)("div",{className:"order-status",style:{color:u(e.status)},children:e.status})]}),(0,d.jsx)("div",{className:"order-items",children:e.items.map((e=>(0,d.jsxs)("div",{className:"order-item",children:[(0,d.jsx)("div",{className:"item-image",children:(0,d.jsx)("img",{src:e.plant.imageUrl||"/assets/plant-placeholder.jpg",alt:e.plant.name})}),(0,d.jsxs)("div",{className:"item-details",children:[(0,d.jsx)("h4",{children:e.plant.name}),(0,d.jsxs)("p",{children:["Quantity: ",e.quantity]}),(0,d.jsxs)("p",{className:"item-price",children:["\u20b9",(e.price*e.quantity).toFixed(2)]})]})]},e._id)))}),(0,d.jsxs)("div",{className:"order-footer",children:[(0,d.jsxs)("div",{className:"order-info",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Total:"})," \u20b9",e.totalAmount.toFixed(2)]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Payment:"})," ",e.paymentMethod]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Payment Status:"})," ",e.paymentStatus]})]}),(0,d.jsxs)("div",{className:"order-actions",children:[(0,d.jsx)("button",{className:"view-details-btn",onClick:()=>h(`/orders/${e._id}`),children:"View Details"}),"Pending"===e.status&&(0,d.jsx)("button",{className:"cancel-order-btn",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to cancel this order?"))try{l(!0),await t.rX.cancelOrder(e);const r=await t.rX.getOrders();s(r.data),o(null)}catch(n){var r,a;console.error("Error cancelling order:",n),o((null===(r=n.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to cancel order")}finally{l(!1)}})(e._id),children:"Cancel Order"})]})]})]},e._id);var r}))})]}),(0,d.jsxs)("footer",{className:"orders-footer",children:[(0,d.jsxs)("div",{className:"footer-content",children:[(0,d.jsxs)("div",{className:"footer-section",children:[(0,d.jsx)("h4",{children:"VirtualGreen"}),(0,d.jsx)("p",{children:"Your virtual greenhouse experience"})]}),(0,d.jsxs)("div",{className:"footer-section",children:[(0,d.jsx)("h4",{children:"Quick Links"}),(0,d.jsx)(i.N_,{to:"/about",children:"About Us"}),(0,d.jsx)(i.N_,{to:"/contact",children:"Contact"}),(0,d.jsx)(i.N_,{to:"/faq",children:"FAQ"})]}),(0,d.jsxs)("div",{className:"footer-section",children:[(0,d.jsx)("h4",{children:"Support"}),(0,d.jsx)(i.N_,{to:"/shipping",children:"Shipping"}),(0,d.jsx)(i.N_,{to:"/returns",children:"Returns"}),(0,d.jsx)(i.N_,{to:"/privacy",children:"Privacy Policy"})]})]}),(0,d.jsxs)("div",{className:"copyright",children:["\xa9 ",(new Date).getFullYear()," VirtualGreen. All rights reserved."]})]})]})}}}]);
//# sourceMappingURL=446.41c3af8c.chunk.js.map